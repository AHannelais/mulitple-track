{"ast":null,"code":"var _jsxFileName = \"D:\\\\Code\\\\Workspace\\\\mutliple-tracks\\\\src\\\\components\\\\Pages\\\\admin\\\\GoogleAuth.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport adminAccounts from \"./adminAccounts\";\nimport Modal from \"../../modal\";\nimport { signIn, signOut } from \"../../../actions\";\n\nclass GoogleAuth extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.onAuthchange = isSignedIn => {\n      if (isSignedIn) {\n        this.props.signIn();\n      } else {\n        this.props.signOut();\n      }\n    };\n\n    this.onSignInClick = () => {\n      this.auth.signIn();\n    };\n\n    this.onSignOutClick = () => {\n      this.auth.signOut();\n    };\n\n    this.renderAuthButton = () => {\n      if (this.props.isSignedIn) {\n        if (this.auth) {\n          console.log(\"ID compte Google :\", this.auth.currentUser.get().getId());\n\n          if (!Object.values(adminAccounts).includes(this.auth.currentUser.get().getId())) {\n            return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 57\n              },\n              __self: this\n            }, React.createElement(\"button\", {\n              onClick: this.onSignInClick,\n              className: \"btn btn-danger m-1\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 58\n              },\n              __self: this\n            }, React.createElement(\"i\", {\n              className: \"fab fa-google\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 62\n              },\n              __self: this\n            }), \" Connexion au compte Google\")), React.createElement(Modal, {\n              title: \"Ce Compte n'est pas Administrateur\",\n              content: \"Si vous n'\\xEAtes pas connect\\xE9 sur un compte administrateur, aucune modification ne sera prise en compte\",\n              actions: this.renderModalActions(),\n              onDismiss: this.onSignOutClick,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 65\n              },\n              __self: this\n            }));\n          }\n        }\n\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: this.onSignOutClick,\n          className: \"btn btn-danger m-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fab fa-google\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }), \" Deconnexion\"), React.createElement(\"button\", {\n          className: \"btn btn-outline-secondary m-1\",\n          disabled: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \"Connect\\xE9\"));\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: this.onSignInClick,\n          className: \"btn btn-danger m-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fab fa-google\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }), \" Connexion au compte Google\"));\n      }\n    };\n  }\n\n  componentDidMount() {\n    window.gapi.load(\"client:auth2\", () => {\n      window.gapi.client.init({\n        clientId: \"631609271480-clskh501ibbejhlncvcr2j5jupj29g5e.apps.googleusercontent.com\",\n        scope: \"email\"\n      }).then(() => {\n        this.auth = window.gapi.auth2.getAuthInstance();\n        this.onAuthchange(this.auth.isSignedIn.get());\n        this.onSignOutClick();\n        this.auth.isSignedIn.listen(this.onAuthchange);\n      });\n    });\n  }\n\n  renderModalActions() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-secondary m-1\",\n      onClick: this.onSignOutClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, \"OK\"));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, this.renderAuthButton());\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    isSignedIn: state.auth.isSignedIn\n  };\n};\n\nexport default connect(mapStateToProps, {\n  signIn,\n  signOut\n})(GoogleAuth);","map":{"version":3,"sources":["D:/Code/Workspace/mutliple-tracks/src/components/Pages/admin/GoogleAuth.js"],"names":["React","connect","adminAccounts","Modal","signIn","signOut","GoogleAuth","Component","onAuthchange","isSignedIn","props","onSignInClick","auth","onSignOutClick","renderAuthButton","console","log","currentUser","get","getId","Object","values","includes","renderModalActions","componentDidMount","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","render","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport adminAccounts from \"./adminAccounts\";\nimport Modal from \"../../modal\";\nimport { signIn, signOut } from \"../../../actions\";\n\nclass GoogleAuth extends React.Component {\n  componentDidMount() {\n    window.gapi.load(\"client:auth2\", () => {\n      window.gapi.client\n        .init({\n          clientId:\n            \"631609271480-clskh501ibbejhlncvcr2j5jupj29g5e.apps.googleusercontent.com\",\n          scope: \"email\",\n        })\n        .then(() => {\n          this.auth = window.gapi.auth2.getAuthInstance();\n          this.onAuthchange(this.auth.isSignedIn.get());\n          this.onSignOutClick();\n          this.auth.isSignedIn.listen(this.onAuthchange);\n        });\n    });\n  }\n  onAuthchange = isSignedIn => {\n    if (isSignedIn) {\n      this.props.signIn();\n    } else {\n      this.props.signOut();\n    }\n  };\n  onSignInClick = () => {\n    this.auth.signIn();\n  };\n  onSignOutClick = () => {\n    this.auth.signOut();\n  };\n  renderModalActions() {\n    return (\n      <React.Fragment>\n        <button className=\"btn btn-secondary m-1\" onClick={this.onSignOutClick}>\n          OK\n        </button>\n      </React.Fragment>\n    );\n  }\n  renderAuthButton = () => {\n    if (this.props.isSignedIn) {\n      if (this.auth) {\n        console.log(\"ID compte Google :\", this.auth.currentUser.get().getId());\n        if (\n          !Object.values(adminAccounts).includes(\n            this.auth.currentUser.get().getId()\n          )\n        ) {\n          return (\n            <>\n              <div>\n                <button\n                  onClick={this.onSignInClick}\n                  className=\"btn btn-danger m-1\"\n                >\n                  <i className=\"fab fa-google\" /> Connexion au compte Google\n                </button>\n              </div>\n              <Modal\n                title=\"Ce Compte n'est pas Administrateur\"\n                content=\"Si vous n'êtes pas connecté sur un compte administrateur, aucune modification ne sera prise en compte\"\n                actions={this.renderModalActions()}\n                onDismiss={this.onSignOutClick}\n              />\n            </>\n          );\n        }\n      }\n\n      return (\n        <div>\n          <button onClick={this.onSignOutClick} className=\"btn btn-danger m-1\">\n            <i className=\"fab fa-google\" /> Deconnexion\n          </button>\n          <button className=\"btn btn-outline-secondary m-1\" disabled>\n            Connecté\n          </button>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <button onClick={this.onSignInClick} className=\"btn btn-danger m-1\">\n            <i className=\"fab fa-google\" /> Connexion au compte Google\n          </button>\n        </div>\n      );\n    }\n  };\n\n  render() {\n    return <div>{this.renderAuthButton()}</div>;\n  }\n}\n\nconst mapStateToProps = state => {\n  return { isSignedIn: state.auth.isSignedIn };\n};\nexport default connect(\n  mapStateToProps,\n  { signIn, signOut }\n)(GoogleAuth);\n"]},"metadata":{},"sourceType":"module"}